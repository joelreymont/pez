---
title: Implement FORMAT_VALUE for f-strings (3.6+)
status: closed
priority: 2
issue-type: task
created-at: "\"\\\"2026-01-10T06:36:26.938385+02:00\\\"\""
closed-at: "2026-01-10T07:11:13.319308+02:00"
---

File: src/stack.zig (simulate()). Opcode: FORMAT_VALUE (flags: conversion + format_spec). Stack effect: Pop value [+ format_spec if flag set], push formatted string. Semantics: Formats value for f-string interpolation. Test file: f-string.3.7.pyc. Implementation: 1) Add FORMAT_VALUE case, 2) Pop value, 3) Handle conversion flags (!s !r !a), 4) Handle format_spec if present, 5) Create formatted string expr. Also handle BUILD_STRING to concatenate parts. Priority: P1-HIGH.
